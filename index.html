<!DOCTYPE HTML>


<HTML lang="en"><HEAD>
 
<META charset="utf-8"> <!-- viewport meta to reset iPhone inital scale --> 
<META name="viewport" content="width=device-width, initial-scale=1.0"> 
<TITLE>Where I Parked?</TITLE> <!-- css3-mediaqueries.js for IE8 or older  <!--[if lt IE 9]>-->

<SCRIPT src="jquery-1.7.1.min.js" type="text/javascript"></SCRIPT>
	<script src="css3-mediaqueries.js"></script>
   <!-- 	<script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>-->

<STYLE type="text/css">
    body {
	font: 1em/150% Arial, Helvetica, sans-serif;
}
a {
	color: #669;
	texto-decoration: none;
}
a:hover {
	texto-decoration: underline;
}
h1 {
	font: bold 36px/100% Arial, Helvetica, sans-serif;
}

/************************************************************************************
ESTRUCTURA
*************************************************************************************/
#pagewrap {
	padding: 5px;
	width: 960px;
	margin: 20px auto;
}
#header {
	height: 180px;
}
#content 
{
    background-color:Black;
	width: 600px;
	float: left;
}
#sidebar {
	width: 300px;
	float: right;
}
#footer {
	clear: both;
}

/************************************************************************************
MEDIA QUERIES
*************************************************************************************/
/* para 980px o menos */
@media screen and (max-width: 768px) {
	
	#pagewrap {
		width: 94%;
	}
	#content 
	{
	      background-color:Black;
		width: 65%;
	
	}
	#sidebar {
		width: 30%;
	}

}

/* para 700px o menos */
@media screen and (max-width: 640px) {

	#content {
		background: #000000;
		width: auto;
		float: none;
	}
	#sidebar {
		width: auto;
		float: none;
	}

}

/* para 480px o menos */
@media screen and (max-width: 400px) {

	#header {
		height: auto;
	}
	h1 {
		font-size: 24px;
	}
	#sidebar {
		display: none;
	}

}

/* borde & guideline (puedes ignorarlo) */
#content {
	background: #f8f8f8;
}
#sidebar {
	background: #eeeeee;
}
#header, #content, #sidebar {
	margin-bottom: 5px;
}
#pagewrap, #header, #content, #sidebar, #footer {
	border: solid 1px #ccc;
}

    
    </STYLE>


<script type="text/javascript">
    var map;
    var latitud;
    var longitud;
    var precision;


    $(document).ready(function () {
        //localStorage.clear();
        if (localStorage.getItem("datetime") != null)
            document.getElementById("showmap").innerHTML = "Show Your Car <br> Parked at " + localStorage.getItem("datetime") ;
    });


   

    function localizame() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(coordenadas, errores);

           
        } else {
            alert('Oops! Tu navegador no soporta geolocalización. Bájate Chrome, que es gratis!');
        }
    }

    function coordenadas(position) {

        if (typeof (Storage) !== "undefined") {
            var currentdate = new Date();
            datetime = currentdate.toLocaleString();


            latitud = position.coords.latitude;
            longitud = position.coords.longitude;
            precision = position.coords.accuracy;

            localStorage.setItem("latitud", latitud);
            localStorage.setItem("longitud", longitud);
            localStorage.setItem("precision", precision);
            localStorage.setItem("datetime", datetime);

            alert("Your Parking at " + localStorage.getItem("datetime") + " was Saved")
            document.getElementById("showmap").innerHTML = "Show Your Car <br> Parked at " + localStorage.getItem("datetime")
            //     document.getElementById("showmap").innerHTML = "Show Last (" + localStorage.getItem("latitud") + ";" + localStorage.getItem("longitud") + ")";
        } else {
            alert('Sorry! No Web Storage support..!');
         
        }
        
    }

    function errores(err) {
        if (err.code == 0) {
            alert("Oops! Algo ha salido mal");
        }
        if (err.code == 1) {
            alert("Oops! No has aceptado compartir tu posición");
        }
        if (err.code == 2) {
            alert("Oops! No se puede obtener la posición actual");
        }
        if (err.code == 3) {
            alert("Oops! Hemos superado el tiempo de espera");
        }
    }

   
    </script>
  
     <script type="text/javascript">
   

    function init_page() {

       const oversion = '1.1.1.1';
       xmlDoc = loadXMLDoc("http://www.jm2.com.ar/Mobile/WhereIParked/WhereIParked.xml");
      //   xmlDoc = loadXMLDoc("http://localhost/WhereIPark/WhereIParked.xml");
        versionXML = xmlDoc.getElementsByTagName('version');
    


        olastversion=versionXML[0].firstChild.nodeValue
       
//       sponsorsXML = xmlDoc.getElementsByTagName('sponsors');
//         alert( sponsorsXML[0].firstChild.nodeValue);

        if(oversion != olastversion)
        alert('You have to Update Where I Parked? application');
       
     
        sponsorsXML = xmlDoc.getElementsByTagName('sponsor');
        
       var nro = Math.floor((Math.random() * 10));
       xmlsponsor = sponsorsXML[nro];
      //  alert(sponsorsXML.length);

         sponsorsXML = xmlDoc.getElementsByTagName('sponsor');
         xmlSponsor = sponsorsXML[nro];
         var scrNode  = xmlSponsor.getElementsByTagName('scr');
         var hrefNode = xmlSponsor.getElementsByTagName('href');
         var altNode  = xmlSponsor.getElementsByTagName('alt');

        var scr = scrNode[0].firstChild.nodeValue
         var href = hrefNode[0].firstChild.nodeValue
          var alt = altNode[0].firstChild.nodeValue
      


//        if (scrNode[0] != null && scrNode[0] != undefined)
//          alert(  scrNode[0].firstChild.nodeValue);
//        else
//            alert(  'undefined');
//       

        window.document["banner"].src = scr;
        window.document["banner"].href = href;
        window.document["banner"].alt = scr;
       // window.document.links[0].href = href ;

    }

     function loadXMLDoc(oUrl) {
            if (window.XMLHttpRequest) {
                xhttp = new XMLHttpRequest();
            }
            else {

                xhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            xhttp.open("GET", oUrl, false);
            xhttp.send();
           
            return xhttp.responseXML;
        }
     </script> 

    <html> 
<head> 
   	<title>Rotación de banners con Javascript</title>	



<META name="GENERATOR" content="MSHTML 11.00.9600.16428">
   
</head> 
<body  onload="init_page()">

<DIV id="pagewrap">
<DIV id="header">

<div  style="float:left;margin-top: 0px;margin-bottom: 0px">
<a href="#" ><img src="#" alt="" name="banner" id="banner" width="80"  border="0" style="margin-bottom: 0px;"/></a> 
</div>

<div style="margin-left: 100px;margin-top: 0px;margin-bottom: 0px">
<h3 style="padding:0;margin:0;"  >Where I Parked?</h3>
</div>

<div  style="clear:both;margin-left: 0px;margin-top: 0px;padding:0" >
<P style="padding:0">Version 2.3.4.1</P>
</div>

</DIV>



 
<DIV id="content"  style="background-color:#cccccc">
	

<!--<H2>Contenido</H2>
-->



<form action="javascript:localizame()">
<div align="center">
&nbsp;
<button type="submit" style=" font-size :1.5em;width:95%"  >Save Your Car Position</button> 
</div>
<div > &nbsp;</div>
<div align="center">
&nbsp;
<button type="button" id="showmap" name="showmap"    onclick ="javascript:location.href = 'Localizador.htm'" style=" font-size :1.5em;width:95%" >No Localization</button> 
</div>




<div >
  &nbsp;</div>
<div id="translationField">
  &nbsp;</div>

</form>





<DIV id="sidebar">
<!--<H3>Sidebar</H3>
<P>texto</P>
<P>texto</P>-->
</DIV>

<div id="footer">
<a href="www.jm2.com.ar" ><img src="http://www.jm2.com.ar/Mobile/jm2.png" alt="" name="jm2" id="jm2" width="100"  border="0" style="margin-bottom: 0px;"/></a>
</div>

</div></BODY></HTML>
